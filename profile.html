<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü—Ä–æ—Ñ–∏–ª—å ‚Äî –í–∑–≥–ª—è–¥ –Ω–∞ –ú–æ—Å–∫–≤—É</title>
  <link rel="icon" type="image/png" href="images/favicon.ico">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f5f5;
      color: #333;
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    body.fade-page.visible {
      opacity: 1;
    }

    header, footer {
      background-color: #1a1a1a;
      color: white;
      padding: 20px 40px;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-weight: bold;
      font-size: 18px;
    }

    nav {
      display: flex;
      gap: 15px;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      font-size: 14px;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #ff4d4d;
    }

    .hero {
      position: relative;
      height: 60vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      text-align: center;
    }

    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("images/glavnaya.jpg") no-repeat center center/cover;
      filter: brightness(0.4);
      z-index: 1;
    }

    .hero h1 {
      position: relative;
      z-index: 2;
      font-size: 48px;
      color: white;
      margin: 0;
    }

    .content {
      max-width: 700px;
      margin: 40px auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      line-height: 1.6;
    }

    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #ccc;
      margin: 0 auto 20px;
      background-size: cover;
      background-position: center;
    }

    .profile-name {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 5px;
      text-align: center;
    }

    .profile-login {
      font-size: 16px;
      color: #777;
      text-align: center;
    }

    .profile-meta {
      text-align: center;
      font-size: 14px;
      margin-top: 10px;
      color: #555;
    }

    .edit-btn {
      margin: 20px auto;
      display: block;
      padding: 8px 16px;
      font-size: 14px;
      background-color: #3b8ad8;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    .edit-btn:hover {
      background-color: #2e73b0;
    }

    .content h2 {
      color: #3b8ad8;
      margin-top: 30px;
    }

    .info-block p {
      margin: 10px 0;
      font-size: 16px;
    }

    .tag {
      display: inline-block;
      background-color: #e0f0ff;
      color: #2a6496;
      padding: 6px 12px;
      border-radius: 20px;
      margin: 5px 5px 10px 0;
      font-size: 14px;
    }

    .tag button {
      background: none;
      border: none;
      margin-left: 6px;
      color: #f44336;
      cursor: pointer;
      font-weight: bold;
    }

    .tag-form select, .tag-form button {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      margin-top: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .tag-form button {
      background-color: #3b8ad8;
      color: white;
      border: none;
    }

    .tag-form button:hover {
      background-color: #2e73b0;
    }

    .quick-actions {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 15px;
    }

    .action-btn {
      text-decoration: none;
      padding: 10px 18px;
      background-color: #e3f2fd;
      border: 1px solid #90caf9;
      border-radius: 8px;
      color: #1976d2;
      font-weight: 500;
      transition: all 0.3s ease;
      display: inline-block;
    }

    .action-btn:hover {
      background-color: #bbdefb;
      border-color: #64b5f6;
      color: #0d47a1;
    }

    footer {
      text-align: center;
    }

    footer p {
      margin: 0;
      font-size: 14px;
      color: #aaa;
    }
  </style>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.body.classList.add("fade-page");
      setTimeout(() => document.body.classList.add("visible"), 10);

      document.querySelectorAll("a[href]").forEach(link => {
        const url = new URL(link.href, window.location.origin);
        if (url.origin === window.location.origin) {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            document.body.classList.remove("visible");
            setTimeout(() => {
              window.location.href = this.href;
            }, 150);
          });
        }
      });
    });
  </script>
</head>
<body>

<header>
  <div class="logo">–í–∑–≥–ª—è–¥ –Ω–∞ –ú–æ—Å–∫–≤—É</div>
  <nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="about.html">–û –Ω–∞—Å</a>
    <a href="map.html">–ö–∞—Ä—Ç–∞</a>
    <a href="destinations.html">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤</a>
    <a href="my_route.html">–ú–æ–π –º–∞—Ä—à—Ä—É—Ç</a>
    <a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    <a href="auth.html">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</a>
    <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
  </nav>
</header>

<section class="hero">
  <h1>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h1>
</section>

<section class="content">
  <div class="avatar" id="avatarDisplay"></div>
  <div class="profile-name" id="profile-name">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
  <div class="profile-login" id="profile-login">@username</div>
  <div class="profile-meta" id="profile-gender">–ü–æ–ª: –Ω–µ —É–∫–∞–∑–∞–Ω</div>
  <div class="profile-meta" id="profile-birthdate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: –Ω–µ —É–∫–∞–∑–∞–Ω–∞</div>
  <button class="edit-btn" onclick="location.href='edit_profile.html'">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>

  <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
  <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> 15 –º–∞—è 2025</p>
  <p><strong>–î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ—Å—Ç –≤ –º–∞—Ä—à—Ä—É—Ç:</strong> <span id="route-count">0</span> –∏–∑ 10</p>

  <h2>–í–∞—à–∏ —Ç–µ–≥–∏ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤</h2>
  <div id="tagList"></div>
  <form class="tag-form" onsubmit="addTag(event)">
    <select id="tagSelect">
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–≥</option>
      <option value="–ü–∞—Ä–∫–∏">üèû –ü–∞—Ä–∫–∏</option>
      <option value="–ú—É–∑–µ–∏">üñº –ú—É–∑–µ–∏</option>
      <option value="–ò—Å—Ç–æ—Ä–∏—è">üìú –ò—Å—Ç–æ—Ä–∏—è</option>
      <option value="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞">üèõ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</option>
      <option value="–§–æ—Ç–æ">üì∑ –§–æ—Ç–æ</option>
      <option value="–ú–∞—Ä—à—Ä—É—Ç—ã –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è">üö∂ –ú–∞—Ä—à—Ä—É—Ç—ã –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –¥–Ω—è</option>
    </select>
    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>

  <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
  <div class="quick-actions">
    <a href="my_route.html" class="action-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º</a>
    <a href="destinations.html" class="action-btn">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ</a>
    <a href="#" class="action-btn" onclick="logout()">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</a>
  </div>
</section>

<footer>
  <p>&copy; 2025 –í–∑–≥–ª—è–¥ –Ω–∞ –ú–æ—Å–∫–≤—É | vzglad.moskvy@yandex.ru</p>
</footer>

<script>
  const user = JSON.parse(localStorage.getItem("user")) || { username: "guest" };
  const nameField = document.getElementById("profile-name");
  const loginField = document.getElementById("profile-login");
  const genderField = document.getElementById("profile-gender");
  const birthdateField = document.getElementById("profile-birthdate");
  const routeCount = document.getElementById("route-count");
  const tagList = document.getElementById("tagList");
  const avatarDisplay = document.getElementById("avatarDisplay");

  function renderProfile() {
    nameField.textContent = user.name || "–ò–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ";
    loginField.textContent = "@" + (user.username || "guest");
    genderField.textContent = "–ü–æ–ª: " + (user.gender || "–Ω–µ —É–∫–∞–∑–∞–Ω");
    birthdateField.textContent = "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: " + (user.birthdate || "–Ω–µ —É–∫–∞–∑–∞–Ω–∞");

    const routeKey = user && user.username ? `route_${user.username}` : null;
    const routeData = routeKey ? JSON.parse(localStorage.getItem(routeKey)) || [] : [];
    routeCount.textContent = routeData.length;

    const tagKey = user && user.username ? `tags_${user.username}` : "userTags";
    const tags = JSON.parse(localStorage.getItem(tagKey)) || [];
    tagList.innerHTML = "";
    tags.slice(0, 3).forEach((tag, index) => {
      const span = document.createElement("span");
      span.className = "tag";
      span.innerHTML = `${tag} <button onclick="removeTag(${index})">√ó</button>`;
      tagList.appendChild(span);
    });

    const defaultAvatar = 'images/avatar-placeholder.png';
    avatarDisplay.style.backgroundImage = `url('${user.avatar || defaultAvatar}')`;
  }

  function addTag(event) {
    event.preventDefault();
    const select = document.getElementById("tagSelect");
    const value = select.value;
    if (!value) return;

    const tagKey = user && user.username ? `tags_${user.username}` : "userTags";
    let tags = JSON.parse(localStorage.getItem(tagKey)) || [];
    if (tags.includes(value)) return;
    if (tags.length >= 3) {
      alert("–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 3 —Ç–µ–≥–æ–≤.");
      return;
    }

    tags.push(value);
    localStorage.setItem(tagKey, JSON.stringify(tags));
    select.value = "";
    renderProfile();
  }

  function removeTag(index) {
    const tagKey = user && user.username ? `tags_${user.username}` : "userTags";
    let tags = JSON.parse(localStorage.getItem(tagKey)) || [];
    tags.splice(index, 1);
    localStorage.setItem(tagKey, JSON.stringify(tags));
    renderProfile();
  }

  function logout() {
    localStorage.removeItem("user");
    alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞.");
    window.location.href = "auth.html";
  }

  renderProfile();
</script>

</body>
</html>
